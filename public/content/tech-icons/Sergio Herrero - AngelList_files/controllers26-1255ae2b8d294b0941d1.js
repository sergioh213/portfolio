webpackJsonp([773],{2736:function(e,t,n){function r(e){return n(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./profiles":2737,"./profiles/bio_form":2739,"./profiles/modules":2741,"./profiles/shared":2742,"./profiles/show":2743};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=2736},2737:function(e,t,n){e.exports=Promise.all([new Promise(function(e){e()}).then(n.bind(null,2)),new Promise(function(e){e()}).then(n.bind(null,33)),new Promise(function(e){e()}).then(n.bind(null,106)),n.e(41).then(n.bind(null,869)),n.e(1466).then(n.bind(null,2738)),new Promise(function(e){e()}).then(n.bind(null,52)),new Promise(function(e){e()}).then(n.bind(null,107)),n.e(0).then(n.bind(null,810)),n.e(27).then(n.bind(null,853)),n.e(68).then(n.bind(null,998)),new Promise(function(e){e()}).then(n.bind(null,108)),new Promise(function(e){e()}).then(n.bind(null,57)),new Promise(function(e){e()}).then(n.bind(null,164)),n.e(110).then(n.bind(null,1118)),n.e(139).then(n.bind(null,1279))]).then(function(){return function(e,t,n,r,o,i,s,a,u,l,c,d,h,p,f){return{follows:function(t,n){var r;return r=1,t(".more_link").on("click",function(){var n;return r++,(n=e(this)).html(AL.loadingImage()),e.get(t(this).attr("href"),{page:r,modal:n.data("modal")},function(r){return function(o){var i,s,a,u;for(i=0,s=(a=o.rendered_items).length;i<s;i++)u=a[i],e("<li>").appendTo(t(".items")).append(e(u));if(n.text("More"),0===o.rendered_items.length)return t(r).remove()}}(this),"json"),!1})},claim_form:function(e,t){var n,r;return n=e("form"),r=s.loadingOptions(n,{dataType:"json",beforeSend:function(){return e(".errors").addClass("hidden")},success:function(n){return n.success?(t.children("p, form").filter(":not(.success)").hide(),e("p.success").removeClass("hidden")):e(".errors").removeClass("hidden").effect("pulsate",{times:2},1e3)}}),n.ajaxForm(r)},dealflow:function(e,t){return e(".more").on("click",function(){return e(this).hide(),e(this).siblings("li").show()})},quality_score:function(t,n){return TipTip.init(),e("a").click(function(){return e(this).attr("href").indexOf("#")>=0&&e.facybox.close(),!0})},profile_tips:function(t,n){return TipTip.init(),e("a").click(function(){return e(this).attr("href").indexOf("#")>=0&&e.facybox.close(),!0})},show_new:function(n,r){var o,s,a;return(a=window.location.href).search("edit_profile")>-1?i.with(e(i.selector("profiles/show/header")),function(e){if(e.$el.find(".edit").length)return e.edit()}):a.indexOf("#")>=0&&(s=a.slice(a.indexOf("#")+1),(o=n('[data-tips_selector="'+s+'"]')).length>0&&e.scrollTo(o,{duration:400})),r.data("show-wvyp-modal")&&f.show_wvyp(r.data("show-wvyp-modal")),n(".js-modules-container").sortable({start:function(e,t){return t.placeholder.height(t.item.height())},axis:"y",handle:".js-sortable-handle",items:".js-reorderable",cursor:"move",containment:"parent",placeholder:"s-vgTop2 u-bgGrayDarkest",delay:100,opacity:.5,tolerance:"pointer",stop:function(){var o;return o=t.map(n(".js-reorderable"),function(e){return n(e).data("module_name")}),e.post(r.data("reorder-url"),{ordered_modules:o.join()})}})},follow_container:function(t,n){if(p.events().on("close_graph_modal",function(e){var r;return r=e.neighbor_id,t(".js-user-connection[data-user-id="+r+"]").load("/"+n.data("profile-slug")+"/connection/"+r)}),t(".js-recommended-peeps").length>0)return e.get(t(".js-recommended-peeps").data("url"),function(e){return t(".js-recommended-peeps").html(e)})},user_connection:function(t,n){return t(".js-edit-connection").click(function(t){return e.facybox.close(),e.magnificPopup.open({items:{src:e(event.currentTarget).data("href")},type:"ajax"})})}}}.apply(void 0,arguments[0])}.bind(this))},2739:function(e,t,n){e.exports=Promise.all([new Promise(function(e){e()}).then(n.bind(null,2)),n.e(1461).then(n.bind(null,2740)),n.e(27).then(n.bind(null,853)),n.e(64).then(n.bind(null,958)),n.e(68).then(n.bind(null,998))]).then(function(){return function(e,t,n,r,o){return{form_section:function(){return new t(this,{})},bio_role_field:function(){var t,r,i;if(t=n.get(o),i=e(this).data("startup_role"))return r=new o(i),t.push(r)},bio_tag_field:function(t){var o,i,s;if(o=n.get(r),s=e(this).data("tagging"))return i=new r(s),o.push(i)}}}.apply(void 0,arguments[0])}.bind(this))},2741:function(e,t,n){e.exports=Promise.all([new Promise(function(e){e()}).then(n.bind(null,2)),n.e(110).then(n.bind(null,1118)),n.e(26).then(n.bind(null,844)),new Promise(function(e){e()}).then(n.bind(null,164))]).then(function(){return function(e,t,n){return{connections:function(t,n){return t(".js-reveal-all-paths").click(function(){return t(".js-reveal-all-paths").hide(),t(".js-all-paths").show()}),t(".js-edit-connection").click(function(t){return e.facybox.close(),e.magnificPopup.open({items:{src:e(event.currentTarget).data("href")},type:"ajax"})})}}}.apply(void 0,arguments[0])}.bind(this))},2742:function(e,t,n){e.exports=Promise.all([new Promise(function(e){e()}).then(n.bind(null,2))]).then(function(){return function(e){return{syndicated_deal:function(e){}}}.apply(void 0,arguments[0])}.bind(this))},2743:function(e,t,n){var r=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty,i=function(e,t){return function(){return e.apply(t,arguments)}},s=[].slice;e.exports=Promise.all([new Promise(function(e){e()}).then(n.bind(null,106)),new Promise(function(e){e()}).then(n.bind(null,2)),n.e(121).then(n.bind(null,1217)),new Promise(function(e){e()}).then(n.bind(null,33)),n.e(145).then(n.bind(null,1349)),n.e(1476).then(n.bind(null,2744)),n.e(110).then(n.bind(null,1118)),n.e(65).then(n.bind(null,948)),n.e(70).then(n.bind(null,1016)),n.e(34).then(n.bind(null,857)),n.e(41).then(n.bind(null,869)),n.e(29).then(n.bind(null,854)),n.e(303).then(n.bind(null,1525)),new Promise(function(e){e()}).then(n.bind(null,107)),n.e(0).then(n.bind(null,810)),n.e(141).then(n.bind(null,1277)),new Promise(function(e){e()}).then(n.bind(null,52)),n.e(124).then(n.bind(null,1188)),n.e(57).then(n.bind(null,926)),n.e(167).then(n.bind(null,1366)),n.e(122).then(n.bind(null,1183)),n.e(712).then(n.bind(null,1857)),n.e(165).then(n.bind(null,1353)),n.e(64).then(n.bind(null,958)),n.e(714).then(n.bind(null,1856)),n.e(27).then(n.bind(null,853)),n.e(711).then(n.bind(null,1544)),n.e(68).then(n.bind(null,998)),n.e(83).then(n.bind(null,1093)),n.e(26).then(n.bind(null,844)),n.e(71).then(n.bind(null,1027)),n.e(4).then(n.bind(null,813)),new Promise(function(e){e()}).then(n.bind(null,164)),n.e(1240).then(n.bind(null,2745)),n.e(101).then(n.bind(null,1191)),new Promise(function(e){e()}).then(n.bind(null,57))]).then(function(){return function(e,t,o,a,u,l,c,d,h,p,f,g,_,m,w,v,y,b,j,k,$,C,x,T,P,A,D,E,V,q,O){var R,S,N,z,I,U;return N=a.extend({},e.Events),I=function(e){return y.with(t(y.selector("profiles/show/completeness")),function(t){return t.reload(e)})},S=function(e,n){var o,i;if(!n.data("userId"))throw new Error("Must provide a user ID");return o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"sync",function(){return I("about")})},t}(b.ModelEditableRegion),i=new o({el:e(".content"),model:A.get(V).bootstrap(n.data("userId"))}),e(".header .controls").each(function(){return new b.EditableRegionControls({editableRegion:i,el:this})}),e(".content .edit").each(function(){return e(this).show(),e("textarea",this).autosize().each(function(){return e(this).qtip({defaultPosition:"right",activation:"focus"}),new m.CharacterCounter({el:this,container:e(this).closest(".item").find(".character_counter"),max:parseInt(e(this).data("max"))})}),e(this).hide()}),y.with(e(y.selector("profiles/show/module_taggings")),function(n){return n.on("edit",function(){return t.when(i.edit()).done(function(){return y.with(e(y.selector("profiles/show/module_taggings_edit")),function(e){if(e.field===n.field)return e.focus()})})})}),i},R=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.render=function(){return this.model.has(this.field)&&t.trim(this.model.get(this.field)).length>0?(this.$(".value").html(j.link_and_format(this.model.get(this.field))),this.$el.removeClass("empty")):(this.$(".value").empty(),this.$el.addClass("empty"))},n.prototype.events=function(){return{"click .filler":function(e){return function(){return e.trigger("edit")}}(this)}},n.prototype.initialize=function(e){return this.field=e.field,this.listenTo(this.model,"change:"+this.field,this.render,this)},n}(e.View),z=function(e){return e.find(".module_placeholder").each(function(){var n,r;return r=t(this).data("url"),n="profiles/modules/"+t(this).data("module"),t.getJSON(r,{render:[n]},function(r){return t.trim(r[n]||"").length>0?e.find(".show").removeClass(".loading").html(r[n]):e.fadeOut("fast")})})},U=function(e){var n,r;return r=t(this).data("url"),n="profiles/show/"+e,t.getJSON(r,{render:[n]},function(e){return y.with(t(y.selector(n)),function(t){return t.replaceContent(e[n])})})},{investments:function(e,t){var n,r;return n=t.find(".js-investments"),r=t.find(".placeholder"),l.mount(n[0],n.data(),r)},about:function(e,n){var r,o,i,s,a,u;for(r=S(e,n),a=A.get(P).bootstrap({id:n.data("profileId"),user_id:n.data("userId")}),o=function(n){return e(".content."+n).each(function(){return new R({el:this,field:n,model:a}).on("edit",function(){return t.when(r.edit()).done(function(){return e(".content .edit ."+n+" :input").focus()})})})},i=0,s=(u=["summary","what_ive_built","criteria"]).length;i<s;i++)o(u[i]);return y.with(e(y.selector("profiles/show/module_taggings")),function(e){return e.on("edit",function(){return r.edit()})})},question_answers:function(n,o){return S(n,o),n("> .content > .edit").show(),new(function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .answer-submit":function(e){return this.submitAnswer(e,!0)},"click .skip":function(e){return this.submitAnswer(e,!1)},"click .edit-answer":function(e){return this.editAnswer(e)},"click .remove-answer":function(e){return this.removeAnswer(e)},"click .more":"showMore"},o.prototype.submitAnswer=function(e,r){var o;return o=t(e.currentTarget).closest("form"),t.ajax({url:o.attr("action"),data:o.serialize(),type:"POST",dataType:"json",success:function(e){return r&&n(".responses").html(e.answers),n(".next-question").html(e.next_question.question),n("input[name=qid]").val(e.next_question.next_id),n("textarea[name=answer]").val(e.next_question.answer)},error:function(e){return alert("Something went wrong. Your answer was not saved.")}})},o.prototype.editAnswer=function(e){return e.preventDefault(),n(".next-question").html(t(e.target).closest(".question-group").find(".question-text")[0].innerHTML),n("#answer").val(t(e.target).closest(".question-group").find("#answer-text")[0].value),n("input[name=qid]").val(t(e.target).closest(".question-group").find("#answer-qid")[0].value)},o.prototype.removeAnswer=function(e){var r;if(e.preventDefault(),r=t(e.target).attr("href"),confirm("Are you sure you want to delete this answer? This can't be undone."))return t.ajax({url:r,type:"DELETE",success:function(e){return n(".responses").html(e.answers)},error:function(e){return alert("Something went wrong. Your answer was not deleted.")}})},o.prototype.showMore=function(){return n(".more").hide(),n(".question_answer").removeClass("extra")},o}(e.View))({el:o})},module_taggings:function(n,o){return n(".tag").each(function(){return A.get(T).bootstrap({id:n(this).data("id"),new_taggable_field:o.data("field"),new_taggable_type:"User",new_taggable_id:o.data("id"),new_tag:{slug_url:n("a",this).attr("href"),display_name:n(this).text()}})}),new(function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.template=a.template('<span class="tag"><% if (typeof slug_url != "undefined") { %><a href="<%- slug_url %>"><% } %><%- display_name %><% if (typeof slug_url != "undefined") { %></a><% } %></span>'),i.prototype.field=o.data("field"),i.prototype.events=function(){return{"click .filler":function(e){return function(){return e.trigger("edit")}}(this)}},i.prototype.render=function(){var e;return e=this.relevantTaggings(),o.toggleClass("empty",0===e.length),a.each(e,function(e){return function(r){var o;if(!(n(".tag").filter(function(){return n(this).data("id")===r.id}).length>0))return(o=t(e.template(r.get("new_tag")))).data("id",r.id),n(".value").append(o)}}(this)),n(".tag").each(function(){if(!a.any(e,function(e){return function(t){return t.id===n(e).data("id")}}(this)))return n(this).remove()})},i.prototype.initialize=function(){return this.listenTo(this.collection,"add remove change",function(e){return function(t){if(t.get("new_taggable_field")===o.data("field"))return e.render()}}(this))},i.prototype.relevantTaggings=function(){return this.collection.where({new_taggable_field:o.data("field"),new_taggable_type:"User",new_taggable_id:o.data("id")})},i}(e.View))({el:this,collection:A.get(T)})},module_taggings_edit:function(t,n){var o;return A.get(T).bootstrap(n.data("newTaggings")),o=j.capitalize(/_([^_]*)s$/.exec(n.data("field"))[1])+"Tag",new d.NewTaggingField({el:this,container:t(".association_container"),new_taggable_id:n.data("userId"),new_taggable_type:"User",new_taggable_field:n.data("field"),tag_type:o,allowUnmatched:a.contains(["tags_roles","tags_skills","tags_needs","tags_interested_markets"],n.data("field"))}),new(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.field=n.data("field"),t.prototype.focus=function(){return this.$(":input").focus()},t}(e.View))({el:this})},cover_photo:function(e,s){var u;return u=t.Deferred(),Promise.all([n.e(805).then(n.bind(null,2746)),n.e(4).then(n.bind(null,813))]).then(function(){return function(n){return function(l){var c,d,h,p;return h=A.get(V).bootstrap({id:s.data("user_id"),cover_photo_url:s.data("cover_photo_url")}),d=A.get(P).bootstrap({id:s.data("id"),user_id:s.data("user_id"),cover_photo_url:s.data("cover_photo_url"),cover_photo_vertical_offset:s.data("cover_photo_vertical_offset")}),c=function(s){function u(){return n.save=i(n.save,this),u.__super__.constructor.apply(this,arguments)}return r(u,s),u.prototype.events=function(){return{"click .cancel":"show","click .save":"save","click .change":"_openFileDialog","click .remove":function(e){return function(){return e.setRemoving(!0)}}(this),"click .undo":function(e){return function(){return e.setRemoving(!1)}}(this),"submit form":function(e){return function(t){return t.preventDefault(),e.save()}}(this),"change :file":function(t){return function(n){var r,i,s;if(!o.filereader)throw new Error("File API not supported for cover photo");if(t._fileProcessId||(t._fileProcessId=0),t._fileProcessId++,n.target.files.length>0)return t.edit(),s=new FileReader,(i=n.target.files[0]).type.match("image.*")?(r=t._fileProcessId,s.onload=function(){if(t._fileProcessId=r)return e(".cover_draggable").attr("src",s.result),t.currentVerticalOffset=.5,t.resetDimensions()},s.readAsDataURL(i)):t.$(".error").show()}}(this)}},u.prototype.render=function(){var e;return e=Number(this.model.get("cover_photo_vertical_offset")),100*e+"%",this.$(".cover").css({"background-image":this.model.has("cover_photo_url")?"url("+this.model.escape("cover_photo_url")+")":"","background-position":"50% "+100*e+"%"}),this._resetDraggableImage(),this.resetDimensions()},u.prototype.setRemoving=function(t){return e(".links").toggle(!t),e(".removing").toggle(t),e(".remove_cover_photo").val(t)},u.prototype.editOrAdd=function(){return this.model.has("cover_photo_url")?this.edit():this._openFileDialog()},u.prototype.show=function(){return this.currentVerticalOffset=Number(this.model.get("cover_photo_vertical_offset")),this.setRemoving(!1),this.$(":file").replaceWith(this.$fileClone.clone()),this.$(".error").hide(),this._resetDraggableImage(),this.resetDimensions(),u.__super__.show.apply(this,arguments)},u.prototype.save=function(){var e,t;return(e=this.$("form")).find(":input.cover_photo_vertical_offset").val(this.currentVerticalOffset),t=m.attributes(e,h.prefix()),this.$(".error").hide(),e.ajaxSubmit(m.loadingOptions(e,{success:function(e){return function(n){return null!=n.errors?e.$(".error").show():(h.set(n.user),h.set(t),e.show())}}(this),dataType:"json",error:function(e){return function(){return e.$(".error").show()}}(this)}))},u.prototype.resetDimensions=function(){return this.$(".cover_draggable").imagesLoaded(function(e){return function(){var t,n;if(null!=e.$("> .edit").height())return n=e.$("> .edit").is(":visible"),e.$("> .edit").show(),e.$el.removeClass("image_stretch_vertical"),e.$(".cover_draggable").css("height","auto"),e.$(".cover_draggable").height()<e.$("> .edit").height()&&(e.$el.addClass("image_stretch_vertical"),e.$(".cover_draggable").height(e.$("> .edit").height())),e.$(".cover_draggable_container").height(2*e.$(".cover_draggable").height()-e.$("> .edit").height()),t=Math.floor((1-e.currentVerticalOffset)*(e.$(".cover_draggable").height()-e.$("> .edit").height())),e.$(".cover_draggable").css("top",t+"px"),e.$("> .edit").toggle(n);a.delay(e.resetDimensions,150)}}(this))},u.prototype.delegateEvents=function(){var e,n,r;return u.__super__.delegateEvents.apply(this,arguments),r=this,this.$(".cover_draggable").each(function(){return r.draggie||(r.draggie=new l(this,{axis:"y",containment:!0}))}),null!=(e=this.draggie)&&e.enable(),null!=(n=this.draggie)&&n.on("dragEnd",function(e){return function(){var t,n;return n=e.$(".cover_draggable").height()-e.$("> .edit").height(),t=parseInt(e.$(".cover_draggable").css("top")),e.currentVerticalOffset=1-t/n,e.currentVerticalOffset<0&&(e.currentVerticalOffset=0,e.resetDimensions()),e.currentVerticalOffset>1&&(e.currentVerticalOffset=1,e.resetDimensions()),!1}}(this)),t(window).on("resize.profiles_show_cover_photo",this.resetDimensions)},u.prototype.undelegateEvents=function(){var e,n;return u.__super__.undelegateEvents.apply(this,arguments),null!=(e=this.draggie)&&e.disable(),null!=(n=this.draggie)&&n.removeAllListeners(),t(window).off("resize.profiles_show_cover_photo")},u.prototype.initialize=function(){return this.$fileClone=e(":file").clone(),this.resetDimensions=a.throttle(a.bind(this.resetDimensions,this),150),this.currentVerticalOffset=Number(this.model.get("cover_photo_vertical_offset")),this.listenTo(this.model,"change:cover_photo_url change:cover_photo_vertical_offset",this.render,this),this.render()},u.prototype._transition=function(e,n){return e.hide(),n.show(),t.when(!0)},u.prototype._openFileDialog=function(){var e;return e=this.$("> .edit").is(":visible"),this.$("> .edit").show(),this.$("> .edit .hidden").show(),this.$(":file").focus().click(),this.$("> .edit .hidden").hide(),this.$("> .edit").toggle(e)},u.prototype._resetDraggableImage=function(){return this.$(".cover_draggable").attr("src",this.model.get("cover_photo_url")||"//:0")},u}(b.EditableRegion),p=new c({model:d,el:n}),u.resolve(p)}}(this).apply(void 0,arguments[0])}.bind(this)),u.promise()},header:function(e,n){var o,i,a,u,l,c,d,h,p;for(i={},u=0,c=(h=["id","user_id","cover_photo_url"]).length;u<c;u++)i[l=h[u]]=n.data(l);if(null==i.user_id)throw new Error("Must provide a user ID so the profile can listen for changes on its associated user model");return d=A.get(P).bootstrap(i),p=A.get(V).bootstrap(n.data("user_id")),e(".js-remove-photo").click(function(){if(confirm("Are you sure you want to remove your profile photo?"))return e(".js-remove-profile-photo-form").ajaxSubmit({type:"PUT",complete:function(e){return window.location.reload()}})}),e(".edit_link_container").removeClass("preload"),e("> .container > .show").each(function(){return d.on("change:cover_photo_url",function(t,r){return n.toggleClass("with_cover",null!=r),e(".edit_cover_photo").text(null!=r?"Edit Cover":"Add Cover"),y.with(e(y.selector("profiles/show/cover_photo")),function(e){return e.resetDimensions()})}),e(this).on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){return y.with(e(y.selector("profiles/show/cover_photo")),function(e){return e.resetDimensions()})}),y.with(e(y.selector("profiles/show/cover_photo")),function(t){return e(".edit_cover_photo").removeClass("loading").on("click",function(){return t.editOrAdd()}),t.on("edit",function(){return n.addClass("with_cover"),y.with(e(y.selector("profiles/show/cover_photo")),function(e){return e.resetDimensions()}),e("> .container").fadeTo("fast",0,function(){return e("> .cover").addClass("editing")})}),t.on("show",function(){return n.toggleClass("with_cover",d.has("cover_photo_url")),e("> .cover").removeClass("editing"),e("> .container").fadeTo("fast",1)})})}),o=function(o){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,o),i.prototype.save=function(){var n,r,o,i,a;return o=t.Deferred(),r=m.attributes(this.$("> .edit"),p.prefix()),i=!(null==(a=this.$("> .edit form .photo :input").val())||!a.length),m.clearInputErrors(e("> .edit form :input")),n=this.$(".save_link"),this.$("> .edit form").ajaxSubmit({data:{use_status_codes:1,section:"profiles/show/tags"},dataType:"json",beforeSend:function(){return n.addClass("c-button--loading")},success:function(){var e,n;return e=1<=arguments.length?s.call(arguments,0):[],n=e[0],i&&p.set("avatar",null),p.set(r),p.set(n.user),y.with(t(y.selector("profiles/show/tags")),function(e){return e.render(n.html)}),I("header"),o.resolveWith(this,e)},error:function(e){return function(){var n,r;return n=1<=arguments.length?s.call(arguments,0):[],e.error(null!=(r=t.parseJSON(n[0].responseText))?r.errors:void 0),o.rejectWith(e,n)}}(this),complete:function(){return n.removeClass("c-button--loading")}}),o.promise()},i.prototype._transition=function(e,r){return n.toggleClass("editing",e.hasClass("show")),n.hasClass("editing")?(t(y.selector("profiles/show/subheader")).hide(),this.$("> .edit .name input").focus().each(function(){return t(this).val(t(this).val())}),this.$("textarea").trigger("autosize.resize")):t(y.selector("profiles/show/subheader")).show(),!0},i.prototype.changeButtonOpacity=function(e){return this.$(".edit_link_container").css("opacity",e)},i}(b.ModelEditableRegion),a=new o({el:e("> .container"),model:p}),new(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.saveSelector=function(){return".save_link"},t.prototype.editSelector=function(){return".edit_link"},t.prototype.cancelSelector=function(){return".cancel_link"},t.prototype.controlSelector=function(){return".edit .controls"},t.prototype._transition=function(e,t){return!0},t}(b.EditableRegionControls))({el:this,editableRegion:a}),e(".edit .bio").each(function(){return new v.Autocomplete({el:e(".editable",this),target:e(":input.bio_target",this)}),new m.CharacterCounter({el:e(":input.bio_target",this),max:e(":input.bio_target").data("max"),container:e(".character_counter",this)})}),a},subheader:function(e,n){var r;if(null==n.data("userId"))throw new Error("Must provide a user ID");return e(".tiptip").qtip({defaultPosition:"left"}),(r=A.get(V).bootstrap(n.data("userId"))).on("change:name",function(t){return function(n,r){return e(".js-name",t).text(r)}}(this)),r.on("change:avatar",function(t){return function(n,r){return e(".js-avatar-img",t).attr("src",r),e(".js-add-photo").removeClass("js-add-photo")}}(this)),e(".js-add-headline").click(function(){return y.with(t(y.selector("profiles/show/header")),function(e){return e.edit()})}),e(".flag-profile").magnificPopup({type:"ajax"}),e(".js-largePhotoModal").removeClass("u-hidden"),e(".js-launchLargePhotoModal").magnificPopup({items:{src:e(".js-largePhotoModal"),type:"inline"},callbacks:{open:function(){return t(".mfp-content").css({background:"none","-webkit-box-shadow":"none","box-shadow":"none"})}}}),e(".js-add-photo").click(function(){return window.location.href="/onboarding/photo?from_profile=1"}),e(".js-launchLargePhotoModal").css("cursor","pointer")},structure:function(e,t){var n;return n=e(y.selector("profiles/show/header")),e(".js-header-complete").on("mouseover",function(){return y.with(n,function(e){return e.changeButtonOpacity(.9)})}),e(".js-header-complete").on("mouseleave",function(){return y.with(n,function(e){return e.changeButtonOpacity(.5)})})},tags:function(e,n){var r;return e(".tiptip").qtip({defaultPostion:"top"}),r=n.data("profile-id"),{render:function(e){return e?n.replaceWith(e):t.ajax({url:"profiles/"+r+"/header_tags",type:"GET",success:function(e){return n.replaceWith(e.html)}})}}},links:function(e,n){var r,o,i,s,l,c,d,h;if(r=n.data("id")){for(s=A.get(P).bootstrap(r),e("a").each(function(){if(null!=e(this).data("field"))return s.set(e(this).data("field"),e(this).attr("href"))}),c=a.debounce(function(e){return function(){var r,o,i,a;for(n.empty(),r=0,o=(i=n.data("linkOrder")).length;r<o;r++)a=i[r],s.get(a+"_url")&&t("<a>").addClass("icon link_el").addClass("fontello-"+(n.data("fontelloOverrides")[a]||a)).attr("href",s.get(a+"_url")).attr("target","_blank").wrap("<span>").parent().addClass("link").appendTo(t(e));if(s.get("online_bio_url"))return t("<a>").addClass("link_el").attr("href",s.get("online_bio_url")).attr("target","_blank").text(new u(s.get("online_bio_url")).domain()).wrap("<span>").parent().addClass("link").appendTo(n)}}(this),10),d=[],o=0,i=(l=t(this).data("linkOrder")).length;o<i;o++)h=l[o],d.push(s.on("change:"+h+"_url",c));return d}},notifications:function(e,t){return e("a.claim").magnificPopup({type:"inline"})},reviews:function(n,o){return n(".js-reference_form")&&new(function(e){function n(){return this._success=i(this._success,this),n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),A.get(E).on("saved",this.addStartup,this),this.$("textarea").autosize(),this.on("sync",this.addPending),this.pending_template=a.template("<div class='ref s-vgBottom0_5'> <span class='u-fontWeight300'><%- name %> (<%- email %>) sent just now</span> </div>")},n.prototype.events=function(){return{"focus .js-focus":"showForm","click .js-cancel":"hideForm","click .js-add_details":"showDetails","click .js-delete_reference":"deleteReference","change .js-startup_selector":"toggleRole","change .js-reference_name":"updateName","submit form":function(e){return function(){return e.save(),!1}}(this)}},n.prototype.toggleRole=function(e){return""===t(e.currentTarget).val()?t(".js-role_selector").slideUp("fast"):t(".js-role_selector").slideDown("fast")},n.prototype.addStartup=function(e){var t;if((t=this.$(".js-startup_selector")).is(":visible")||t.closest(".hidden").removeClass("hidden"),!(t.find("option[value='"+e.get("startup_id")+"']").length>0))return t.append("<option value='"+e.get("startup_id")+"'>"+e.get("startup_company_name")+"</option>")},n.prototype.clearName=function(){return this.$(".js-name").each(function(){return t(this).text(t(this).data("default"))}),this.$(".js-name_placeholder").attr("placeholder","Michael is the best boss anyone can ask for...")},n.prototype.updateName=function(e){var t;return""===(t=this.$(e.currentTarget).val().split(" ")[0])?this.clearName():(this.$(".js-name").text(t),this.$(".js-name_placeholder").attr("placeholder",t+" is the best boss anyone can ask for..."))},n.prototype.deleteReference=function(e){return t.ajax({method:"DELETE",url:t(e.currentTarget).data("url"),dataType:"json"}),t(e.currentTarget).closest(".ref").fadeOut()},n.prototype.showDetails=function(){return t(".js-add_details").parent().hide(),t(".js-details_container").slideDown("fast")},n.prototype.addPending=function(){var e;return e=this.pending_template({name:this.model.get("confirmer_name"),email:this.model.get("confirmer_email")}),this.$(".js-pending_references_view").removeClass("hidden"),this.$(".js-pending_references_container").prepend(e)},n.prototype.showForm=function(){return this.$(".js-hidden_fields").slideDown("fast")},n.prototype.hideForm=function(){return this.$("form")[0].reset(),this.$(".js-hidden_fields").slideUp("fast")},n.prototype._success=function(){return this.$("form")[0].reset(),this.$("input:visible:first").focus(),this.clearName(),I("references"),n.__super__._success.apply(this,arguments)},n}(m.StandardForm))({el:n(".js-reference_form"),model:new C}),new(function(e){function o(){return this.edit=i(this.edit,this),o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .more":"showMore"},o.prototype.initialize=function(){return this.collection.on("destroy",this.destroy,this),this.original_action=this.$("form").attr("action"),y.with(n(y.selector("reviews/form")),function(e){return function(r){return r.on("save",function(r){return n(".review_form, .form-divider.non-admin").addClass("hidden").find("form")[0].reset(),e.editing_review?e.editing_review.view.update(r):n("ul").removeClass("hidden").append(t('<li class="review">').html(r))})}}(this))},o.prototype.showMore=function(){return this.$(".more").hide(),this.$(".review").removeClass("extra")},o.prototype.destroy=function(){return this.$(".review_form").removeClass("hidden"),this.$("form").prop({action:this.original_action})[0].reset(),this.$('form input[name="_method"]').remove(),n("li.review:visible").length?this.$("ul, .form-divider.non-admin").removeClass("hidden"):this.$("ul, .form-divider.non-admin").addClass("hidden"),this.editing_review=null},o.prototype.edit=function(e){return this.editing_review=e,this.$("form").prop({action:e.url()}).find('[name="review[note]"]').val(e.get("note")),this.$("form").append(t('<input type="hidden" name="_method" value="PUT" />')),t.scrollTo(this.$(".review_form").removeClass("hidden"),{duration:500}),this.$(".form-divider.non-admin").removeClass("hidden")},o}(e.View))({el:o,collection:A.get(D)})},social:function(n,o){var i,s,a;return n(".tiptip").qtip({defaultPosition:"top"}),null!=o.data("follow")&&((s=new x(o.data("follow"))).isNew()||(s=A.get(x).bootstrap(s.toJSON())),a={},new(i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.renderCreated=function(){return this.$el.addClass("following").removeClass("faded").removeClass("not_following").text("Following")},t.prototype.renderDestroyed=function(){return this.$el.addClass("not_following").addClass("faded").removeClass("following").text("Follow")},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this,"request",function(e){return function(){return e.currentXhr().always(function(){return e.$el.removeClass("active")})}}(this))},t.prototype.click=function(){return null!=this.currentXhr()&&this.$el.addClass("active"),t.__super__.click.apply(this,arguments)},t.prototype._destroyModel=function(e){return e.destroy({parameters:a})},t.prototype._saveModel=function(e){return e.save(null,{parameters:a})},t}(_.FollowToggleView))({el:n(".action.follow"),attributes:s.pick(i.REQUIRED_ATTRIBUTES)})),w.isHandheld()||o.data("no-sticky-header")||new O({element:o[0],handler:function(e){return"down"===e?t(this.element).addClass("fixed-top").fadeIn(400):t(this.element).removeClass("fixed-top").css("display","")},offset:function(){return-t(this.element).height()}}),new(function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events=function(){return{"click .js-profile-dropdown-button a":"loadProfileSettings"}},o.prototype.initialize=function(e){return this.reloadingBar=!1,N.on("user_graph_update",function(e){return function(){return e.onReloadBar()}}(this)),c.events().on("user_graph_update",function(e){return function(){return e.onReloadBar()}}(this)),n(".js-magnific").magnificPopup({type:"ajax"}),this.dropdown=new f(this.$(".js-profile-dropdown-button"),this.$(".js-profile-dropdown-menu"),{left:!1,over:!0,offset_top:20}).bind()},o.prototype.onReloadBar=function(){if(!this.reloadingBar)return this.reloadingBar=!0,this.$(".js-social-container").hide(),U("social"),this.reload},o.prototype.replaceContent=function(e){return this.$el.replaceWith(e),this.reloadingBar=!1},o.prototype.loadProfileSettings=function(e){if(this.$(".loading").length)return t.ajax({url:t(e.currentTarget).data("href"),type:"GET",dataType:"json",success:function(e){return function(t){return e.$(".js-message-settings-container").html(t.html)}}(this),error:function(e){return function(){return e.$(".js-message-settings-container").html("There was an error loading this content.")}}(this)})},o}(e.View))({el:o})},social_subheader:function(e,n){return e(".js-mutual-connections").click(function(n){return n.preventDefault(),t.ajax({url:e(this).data("url"),data:"json",success:function(e){return t.magnificPopup.open({items:{src:e.html},type:"inline"})}})})},social_dropdown:function(n,o){return new(function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-edit-connection":"_onTrackAction","click .js-disconnect-connection":"_onTrackAction","click .js-cancel-request":"_onTrackAction","click .js-block":"_onTrackAction","click .js-unblock":"_onTrackAction","click .js-expand-metadata":"_onClickExpand"},o.prototype._initializeDropdown=function(){return this.dropdown=new f(n(".js-dropdown-button"),n(".js-dropdown-menu"),{left:!1,over:!0,offset_top:10}).bind()},o.prototype.initialize=function(e){return this._initializeDropdown(),n(".js-magnific").magnificPopup({type:"ajax"}),this.track_params={source:"neighbor_profile",neighbor_id:this.$el.data("neighbor-id")},this.vent=e.vent},o.prototype._onTrackAction=function(e){var n;return(n=t(e.target)).hasClass("js-edit-connection")?q.track("UserGraph.Edit",this.track_params):n.hasClass("js-disconnect-connection")?q.track("UserGraph.DisconnectShow",this.track_params):n.hasClass("js-cancel-request")?q.track("UserGraph.Cancel",this.track_params):n.hasClass("js-unblock")?q.track("UserGraph.Unblock",this.track_params):n.hasClass("js-block")?q.track("UserGraph.Block",this.track_params):void 0},o.prototype._onClickExpand=function(e){return e.preventDefault(),n(".js-expand-metadata").hide(),n(".js-hidden-metadata").show()},o}(e.View))({el:o,vent:N})},connect_button:function(n,o){return new(function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-request-connection":"requestConnection","click .js-accept-connection":"acceptConnection","click .js-ignore-connection":"ignoreConnection","click .js-disconnect":"disconnectConnection","click .js-verify":"verifyConnection"},o.prototype.initialize=function(e){return this.source=this.$el.data("source"),this.$(".tiptip").qtip({defaultPosition:"top",show:{effect:!1,delay:0},hide:{effect:!1}})},o.prototype.requestConnection=function(e){var n,r;return t.facybox.close(),t.magnificPopup.close(),(r=t(e.currentTarget)).removeClass("js-request-connection"),r.addClass("c-button--loading"),n=r.data("invited-id"),t.ajax({url:r.data("href"),type:"POST",data:{invited_id:n},success:function(e){return function(n){return N.trigger("user_graph_update"),t.magnificPopup.open({closeOnBgClick:!1,showCloseBtn:!1,enableEscapeKey:!1,items:{src:"/user_graph_edges/"+n.edge_id+"?post_request=true&source="+e.source+"&request_id="+n.request_id},type:"ajax"}),r.addClass("js-request-connection"),r.removeClass("c-button--loading")}}(this),error:function(e){var t;return g(null!=(null!=e&&null!=(t=e.responseJSON)?t.error:void 0)?e.responseJSON.error:"An error occurred, please try reloading the page.")}})},o.prototype.acceptConnection=function(e){var r,o;return t.facybox.close(),(r=t(e.currentTarget)).hide(),n(".js-show-connections-button").show(),n(".js-ignore-connection").hide(),o=r.data("neighbor-id"),t.ajax({url:r.data("href"),type:"POST",success:function(e){return function(n){return q.track("UserGraph.Accept",{source:e.source,neighbor_id:o}),N.trigger("user_graph_update"),t.magnificPopup.open({items:{src:"/user_graph_edges/"+n.edge_id+"?source=neighbor_profile"},type:"ajax"})}}(this),error:function(e){return g(e.error?e.error:"An error occurred, please try reloading the page.")}})},o.prototype.ignoreConnection=function(e){var r,o;return t.facybox.close(),(r=t(e.currentTarget)).hide(),n(".js-accept-connection").hide(),n(".js-block-link").show(),o=r.data("neighbor-id"),t.ajax({url:r.data("href"),type:"POST",success:function(e){return function(t){return q.track("UserGraph.Ignore",{source:e.source,neighbor_id:o}),N.trigger("user_graph_update")}}(this),error:function(e){return g(e.error?e.error:"An error occurred, please try reloading the page.")}})},o.prototype.disconnectConnection=function(e){return t.facybox.close(),t.magnificPopup.open({items:{src:t(e.currentTarget).data("href")},type:"ajax"})},o.prototype.verifyConnection=function(e){return t.facybox.close(),t.magnificPopup.open({items:{src:t(e.currentTarget).data("href")},type:"ajax"}),c.events().on("close_graph_modal",function(e){if(e.connected)return n(".js-verify").hide(),n(".js-show-connections-button").show()})},o}(e.View))(a.extend(o.data(),{el:o}))},review:function(n,o){var i,s;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events={"click .toggle":"toggle","click .destroy":"destroy","click .edit":"edit"},n.prototype.initialize=function(){return this.listenTo(this.model,"change:hidden",this.render,this)},n.prototype.toggle=function(e){return e.preventDefault(),this.model.save({hidden:!this.model.get("hidden")},{url:this.$(".toggle").attr("href")})},n.prototype.edit=function(){return y.with(y.selector("profiles/show/reviews"),function(e){return e.edit(s)})},n.prototype.render=function(){return this.$(".review").toggleClass("hidden_review",this.model.get("hidden")),this.$(".toggle").text(this.model.get("hidden")?"Show":"Hide")},n.prototype.update=function(e){var n;return n=t("<li class='review'>").html(e),this.$el.replaceWith(n),this.el=n},n.prototype.destroy=function(e){if(e.preventDefault(),confirm("Are you sure you want to delete this review? This can't be undone."))return this.$el.hide(),this.model.destroy()},n}(e.View),s=A.get(D).bootstrap(o.data("review")),s.view=new i({el:o.parent(),model:s})},admin:function(e,n){return e("> .header .toggle").on("click",function(){return n.children().hide(),e("> .header").show(),e(this).hide(),e("> .header .loading").show(),t.get(e(this).attr("href"),{},function(e){return n.replaceWith(e)},"html"),!1}),n.on("click",".delete_email",function(n){return n.preventDefault(),t.ajax({url:e(this).attr("href"),method:"DELETE"}),e(this).closest(".info").fadeOut()}),e(".merge").on("click",function(){return e(".merge_content").show()}),e(".talent_decline").on("click",function(){var e;return null!==(e=prompt("Why are you banning them? (Optional, but recommended)"))&&(t(this).attr("href",t(this).attr("href")+"&message="+e),!0)}),e(".js-action").click(function(e){return e.preventDefault(),confirm("Are you sure you want to "+t(this).data("title"))&&(t.post(t(this).attr("href")),t(this).replaceWith("Done")),!1}),e(".js-blacklist").on("click",function(){var e;return null!==(e=prompt("Why are you blacklisting them? (Optional, but recommended -- please include documentation if possible)"))&&(t(this).attr("href",t(this).attr("href")+"&message="+e),!0)}),e(".js-new-microfund").click(function(e){return t.facybox({ajax:t(e.currentTarget).data("url")})}),e(".js-delete-investment-entity").click(function(e,n){var r;if(e.preventDefault(),r=t(e.target),confirm("Are you sure you want to delete this investment entity?"))return t.ajax({url:t(this).data("url"),method:"DELETE",success:function(e){return e.success?window.location.reload():(alert("Unable to delete investment entity"),r.html("Unable to delete"))}})})},message_button:function(e,t){return e("a",this).magnificPopup({type:"ajax"})},recommended_people:function(e,n){return t.get(n.data("load_url"),{},function(r){return 0===t.trim(r).length?n.fadeOut("fast"):e(".content .show").removeClass("loading").html(r)})},connections:function(e,t){return z(t)},follow_button:function(n,o){return new(function(e){function n(){return this.destroy_follow=i(this.destroy_follow,this),this.create_follow=i(this.create_follow,this),this.error=i(this.error,this),n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.initialize=function(){return this.follow=this.$(".js-follow"),this.unfollow=this.$(".js-unfollow"),this.follow_token=this.$el.data("follow_token"),this.followed_token=this.$el.data("followed_token")},n.prototype.events=function(){return{"click .js-follow":function(e){return function(){return e.create_follow()}}(this),"click .js-unfollow":function(e){return function(){return e.destroy_follow()}}(this)}},n.prototype.error=function(){return g("An error occured while saving the data, please try to reload the page.")},n.prototype.create_follow=function(){if(!this.follow.hasClass("u-hidden"))return t.ajax({url:"/follows.js",data:{followed_token:this.followed_token,followed_type:"User"},type:"post",dataType:"json",success:function(e){return function(t){return t.success?(e.follow_token=t.follow_token,N.trigger("user_graph_update")):e.error()}}(this),error:function(e){return function(){return e.error()}}(this)})},n.prototype.destroy_follow=function(){if(!this.unfollow.hasClass("u-hidden"))return t.ajax({url:"/follows/"+this.follow_token+".js",data:{_method:"delete"},type:"post",dataType:"json",success:function(e){return function(t){return t.success?N.trigger("user_graph_update"):e.error()}}(this),error:function(e){return function(){return e.error()}}(this)})},n}(e.View))({el:o})},experience:function(t,n){return new(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.events={"click .js-control-links a":"_onControlLinkClick"},t.prototype.focus=function(){return this.$("input:visible").first().focus()},t.prototype._onControlLinkClick=function(e){return y.with(this.$(y.selector("startup_roles/portfolio")),function(t){return t.controlsClick(e)})},t}(e.View))({el:n})},profile_college_tagger:function(n,o){var s,u,l,c,d,f,g;return s=function(e){function n(){return this.destroyTagging=i(this.destroyTagging,this),this.confirmTagging=i(this.confirmTagging,this),n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events={"click .js-confirm-tagging":"confirmTagging","click .js-delete-tagging":"destroyTagging"},n.prototype.removeRow=function(e){if(e.remove(),!this.$(".classmate-tagging-row").length)return this.$(".js-classmate-confirm").remove()},n.prototype.confirmTagging=function(e){var n,r,o;return n=t(e.target),r=n.parents(".classmate-tagging-row"),n.data("name"),o=n.data("id"),t.ajax({url:"collaborator_taggings/"+o+"/confirm_classmate",type:"post",data:{id:o},beforeSend:function(){return n.addClass("c-button--loading"),r.find(".error").empty()},success:function(e){return function(t){return e.removeRow(r),e.collection.reset(t.data)}}(this),error:function(){return r.find(".error").text("An error occurred while confirming classmates.")},complete:function(){return n.removeClass("c-button--loading")}})},n.prototype.destroyTagging=function(e){var n,r,o;return n=t(e.target),r=n.parents(".classmate-tagging-row"),o=n.data("id"),t.ajax({url:"collaborator_taggings/"+o,type:"post",data:{_method:"delete",id:o},beforeSend:function(){return n.addClass("c-button--loading")},success:function(e){return function(t){return e.removeRow(r)}}(this),complete:function(){return n.removeClass("c-button--loading")}})},n}(e.View),g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.events={"click .js-add":"quickAdd",keypress:"submit"},t.prototype.initialize=function(){var e,t,n,r,o;for(this.fields=["name","graduation_year","user_id"],this.input={},n=0,r=(o=this.fields).length;n<r;n++)t=o[n],this.input[t]=this.$("input[name='"+t+"']");return e=new p.TagAutocomplete({el:this.input.name,tag_type:"CollegeTag"}),this.listenTo(e,"select",function(e){return function(t){return e.input.name.attr("value",t.tag.display_name),e.input.graduation_year.focus()}}(this))},t.prototype.resetInput=function(){return this.$("input:visible").val("")},t.prototype.quickAdd=function(){var e;if(""!==this.input.name.val().trim())return this.$("input, a").blur(),(e=this.create()).isValid()?this.trigger("quickAdd"):this.showErrors(e.validationError)},t.prototype.submit=function(e){if(13===e.keyCode&&(this.input.graduation_year.is(":focus")||this.input.name.is(":focus"))){if(this.input.graduation_year.is(":focus"))return this.quickAdd();if(""!==this.input.name.val().trim())return this.input.graduation_year.focus()}},t}(h.AddTaggingView),f=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.showEditView=!1,this.quickAddView=new this.quickTaggingViewClass({el:this.$(".js-quick-add"),collection:this.collection}),new this.confirmClassmatesViewClass({el:this.$el,collection:this.collection}),this.listenTo(this.quickAddView,"quickAdd",function(e){return function(){return e.showEditView=!0}}(this))},n.prototype.resetControls=function(){var e,t,n,r,o;if(this.rowViews){for(r=[],e=0,t=(n=this.rowViews).length;e<t;e++)o=n[e],r.push(o.resetRow());return r}},n.prototype.editTagging=function(e){var t,n;return this.addNewTaggingView.edit(e),this.isEditing=!0,this.resetControls(),a.find(this.rowViews,function(t){return t.model.id===e.id}).showEditForm(this.$(".js-new-form")),t=this.$("textarea"),n=t.siblings().find(".character-counter"),new m.CharacterCounter({el:t,max:t.data("max"),container:n})},n.prototype.renderProfileTags=function(){return y.with(t(y.selector("profiles/show/tags")),function(e){return e.render()})},n.prototype.collectionRemove=function(){return n.__super__.collectionRemove.apply(this,arguments),this.renderProfileTags()},n.prototype.collectionReset=function(){var e,t,r,o,i,s;for(this.hideTaggingView(),n.__super__.collectionReset.apply(this,arguments),e=0,t=(o=this.rowViews).length;e<t;e++)i=o[e],this.listenTo(i,"cancelEdit",function(e){return function(){return e.hideTaggingView()}}(this));return this.showEditView&&((r=(s=a.sortBy(this.rowViews,function(e){return e.model.get("id")}))[s.length-1]).trigger("edit",r.model),this.showEditView=!1,this.quickAddView.resetInput()),this.renderProfileTags(),I("education")},n.prototype.hideTaggingView=function(){return this.isEditing=!1,this.addNewTaggingView&&t(".js-form-template").append(this.addNewTaggingView.$el.hide()),this.resetControls()},n}(h.EditableTaggingList),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.events=function(){return{"click .js-edit":function(e){return function(){return e.trigger("edit",e.model)}}(this),"click .js-delete":function(e){return function(){return e.removeCollege()}}(this),"click .control.js-cancel":function(e){return function(){return e.trigger("cancelEdit")}}(this)}},t.prototype.removeCollege=function(){if(confirm("Are you sure you want to remove this entry?"))return this.model.destroy()},t.prototype.resetRow=function(){return this.$(".js-college-details, .js-edit").show(),this.$(".control.js-cancel").hide()},t.prototype.showEditForm=function(e){return this.$(".js-new-form-container").append(e.show()),this.$(".js-college-details").hide(),this.$('input:visible[value=""], textarea[value=""]').first().focus(),this.$(".js-edit, .control.js-cancel").toggle()},t.prototype.cta=function(){switch(!1){case 0!==(this.model.get("majors")||[]).length:return"Add major";case!!this.model.get("graduation_year"):return"Add graduation year";case!!this.model.get("degree_name"):return"Add details";case!!this.model.get("gpa"):return"Add GPA"}},t.prototype.degree_description=function(){var e,t,n;return n=[(this.model.get("majors")||[]).join(", "),this.model.get("degree_name")],t=n[0],e=n[1],a.compact([e,t]).join(", ")},t.prototype.formatted_gpa=function(){var e,t,n;return n=[this.model.get("gpa"),this.model.get("max_gpa")],e=n[0],t=n[1],e?a.compact([e,t]).map(function(e){return e.toPrecision(3)}).join(" / ")+" GPA":null},t.prototype.metadata=function(){return{degree_description:this.degree_description(),has_classmates:this.model.get("classmates")&&this.model.get("classmates").length,formatted_gpa:this.formatted_gpa()}},t.prototype.renderClassmate=function(e,t){return e?"<a class='u-uncoloredLink' href='"+e+"' target='_blank'>"+t+"</a>":"<span>"+t+"</span>"},t.prototype.render=function(){var e,t,n,r,o,i;if(r=a.extend(this.model.toJSON(),{metadata:this.metadata(),cta:this.cta()}),this.$el.html(this.renderTemplate("#college-row-template",r)),n=this.model.get("classmates")){for(t=[],o=0,i=n.length;o<i;o++)e=n[o],t.push(this.renderClassmate(e.collaborator_slug_url,e.collaborator_to_s));return this.$(".js-classmates").html(t.join(", "))}},t}(h.CollegeRow),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.events={keypress:"submit"},t.prototype.submit=function(e){if(13===e.keyCode&&!this.$("textarea").is(":focus"))return this.add()},t.prototype.show=function(e){var n;return null==e&&(e={}),n=a.extend({doNotShowElement:!0},e),t.__super__.show.call(this,n)},t.prototype.edit=function(e){var n;return(n=this.$(y.selector("projects/collaborator_form"))).data("collaboration-id",e.get("id")),n.data("collaboration-type","Degree"),n.data("collaborator-taggings",e.get("classmates")),y.with(n,function(e){return e.initialize({el:n})}),t.__super__.edit.apply(this,arguments)},t}(h.AddEditDegreeView),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,$),t.prototype.validate=function(e,t){var n,r;if(n=[],a.isEmpty(e.name)&&n.push("Please enter a college name"),(null!=(r=e.description)?r.length:void 0)>300&&n.push("Description is too long"),e.gpa&&Number(e.gpa)<0&&n.push("GPA cannot be negative"),e.gpa&&isNaN(Number(e.gpa))&&n.push("Invalid number entered for GPA"),e.max_gpa&&isNaN(Number(e.max_gpa))&&n.push("Invalid number entered for max GPA"),e.max_gpa&&Number(e.max_gpa)<0&&n.push("Max GPA cannot be negative"),e.max_gpa&&Number(e.max_gpa)>100&&n.push("Max GPA cannot exceed 100"),e.gpa&&Number(e.gpa)>100&&n.push("GPA cannot exceed 100"),e.max_gpa&&e.gpa&&Number(e.gpa)>Number(e.max_gpa)&&n.push("GPA cannot exceed max GPA"),n.length>0)return n},t}(),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,e),t.prototype.model=c,t.prototype.comparator=function(e){return-e.get("graduation_year")},t}(h.DegreeCollection),new(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return r(t,f),t.prototype.collectionClass=d,t.prototype.rowViewClass=l,t.prototype.newTaggingViewClass=u,t.prototype.quickTaggingViewClass=g,t.prototype.confirmClassmatesViewClass=s,t}())({el:o})},completeness:function(e,n){return new(function(e){function n(){return this._success=i(this._success,this),n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events=function(){return a.extend(n.__super__.events.apply(this,arguments),{"click .tip_link":function(e){return k.handle_click(e,this.profileType)},"click .js-dismiss":"_onDismissClick"})},n.prototype._onDismissClick=function(e){return e.preventDefault(),this.$el.slideUp(400,function(e){return function(){return e.remove()}}(this)),t.post(this.$(e.target).attr("href"))},n.prototype.updatePercent=function(e,t){if(e.text(t+"%"),this.$el.data("pct-complete",t),t<50)return this.$(".js-autocomplete").show()},n.prototype.showNextStep=function(e){return e?(this.$(".js-next-tip").attr("href",e.link),this.$(".js-next-tip").html(e.title+" &raquo"),this.$(".next").show()):(this.$(".next").hide(),this.$(".share").show())},n.prototype._success=function(e){return this.showNextStep(e.next_tip),this.$el.data("pct-complete")<35?(this.$(".js-large-font-section").addClass("u-fontSize20"),this.$(".js-small-font-section").addClass("u-fontSize16")):(this.$(".js-large-font-section").removeClass("u-fontSize20"),this.$(".js-small-font-section").removeClass("u-fontSize16")),this.$el.data("pct-complete")>35&&this.$(".js-onesignal-section").length>0?(this.$(".js-completeness-section").hide(),this.$(".js-onesignal-section").show()):(this.$(".js-onesignal-section").hide(),this.$(".js-completeness-section").show().css("visibility","visible")),this.$el.data("completed-sections",e.completed_sections||{})},n.prototype.reload=function(e){var t;if(!(t=this.$el.data("completed-sections"))||!t[e])return this.load()},n}(k.Completeness))({el:n,profileType:"user",completenessUrl:n.data("completeness-url")})},projects:function(n,o){return new(function(e){function o(){return this._hideReorder=i(this._hideReorder,this),this._showReorder=i(this._showReorder,this),o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-start-reorder":"_showReorder","click .js-stop-reorder":"_hideReorder"},o.prototype._showReorder=function(){var e,t,n;if(t=this.$el.find(".js-start-reorder"),e=this._container(),n=this._projects(),!(t.length<1||n.length<2))return n.addClass("reorder"),t.removeClass("js-start-reorder").addClass("js-stop-reorder").html("Done"),e.sortable({axis:"y",cursor:"move",containment:"parent",tolerance:"pointer"}),e.sortable({disabled:!1});this._hideReorder()},o.prototype._hideReorder=function(e){var r,o,i;return e=this.$el.find(".js-stop-reorder"),r=this._container(),(i=this._projects()).removeClass("reorder"),e.removeClass("js-stop-reorder").addClass("js-start-reorder").html("Reorder"),r.sortable({disabled:!0}),o=[],i.each(function(e,t){return o.push(n(t).data("id"))}),t.ajax({url:r.data("orderUrl"),data:{ids:o},type:"PUT",error:function(e){return alert("Something went wrong. Could not reorder your projects.")}})},o.prototype._container=function(){return this.$(".js-projects-container > *")},o.prototype._projects=function(){return this._container().find("> *")},o}(e.View))({el:o,vent:N})}}}.apply(void 0,arguments[0])}.bind(this))}});